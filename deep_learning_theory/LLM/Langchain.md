# 랭체인 Langchain 노트 - Langchain 한국어 튜토리얼 kr
[Creative Commons Attribution-NonCommercial-NoDerivs 2.0 Korea]
[링크 : https://wikidocs.net/book/14314]

# CH01 . Langchain 시작하기
### 랭체인 LangChain
- Langchain : 언어 모델을 활용해 다양한 애플리케이션을 개발할 수 있는 프레임워크
- 수행할 수 있는 기능
  - 문액을 인식하는 기능
    - 언어 모델을 다양한 문맥 소스와 연결
    - 프롬프트 지시사항, 소수의 예시, 응답에 근거한 내용 등이 포함됨
      - 언어 모델은 제공된 정보를 기반으로 더 정확하고 관련성 높은 답변을 생성할 수 있음
  - 추론하는 기능
    - 주어진 문맥을 바탕으로 어떠한 답변을 제공하거나 어떤 조치를 취해야 할지를 스스로 추론할 수 있음
    - 언어 모델이 단순히 정보를 재생산하는 것을 넘어서 주어진 상황을 분석하고 적절한 해결책을 제시할 수 있음을 의미
- langchain을 활용하면 검색 증강 생성(RAG) 어플리케이션 제작, 구조화된 데이터 분석, 챗봇 등을 만들 수 있음

### 구성
- Langchain 라이브러리
  - Python 및 JavaScript 라이브러리, 다양한 컴포넌트의 인터페이스와 통합, 이러한 컴포넌트를 체인과 에이전트로 결합하는 기본 런타임, 즉시 사용 가능한 체인과 에이전트의 구현을 포함함
- Langchain 템플릿
  - 다양한 작업을 위한 쉽게 배포할 수 있는 참조 아키텍처 모음
- LangServe
  - Langchain 체인을 REST API로 배포하기 위한 라이브러리
- LangSmith
  - LLM 프레임워크에도 구축된 체인을 디버그 ,테스트, 평가 모니터링할 수 있게 해줌
  - Langchain과 원활하게 통합되는 개발자 플랫폼
- LangGraph
  - LLM을 사용한 상태유지가 가능한 다중 액터 애플리케이션을 구축하기 위한 라이브러리
  - Langchain 위에 구축되었으며 Langchain과 함께 사용하도록 설계되었음
  - 여러 계산 단계에서 다중 체인(또는 액터)을 순환 방식으로 조정할 수 있는 능력을 LangChain 표현 언어에 추가함

### 개발 용이성
#### 컴포넌트의 조립 및 통합
- Langchain은 언어 모델과의 작업을 위한 조립 가능한 도구 및 통합을 제공
- 컴포넌트는 모듈식으로 설계되어 사용하기 쉬움
  - 개발자가 Langchain 프레임워크를 자유롭게 활용할 수 있게 해줌

#### 즉시 사용 가능한 체인
- 고수준 작업을 수행하기 위한 컴포넌트의 내장 조합을 제공
- 개발 과정을 간소화하고 속도를 높여줌

#### 주요 모듈
- 모델 I/O
  - 프롬프트 관리, 최적화 및 LLM과의 일반적인 인터페이스와 작업을 위한 유틸리티를 포함함
- 검색
  - 데이터 강화 생성에 초점을 맞춘 이 모듈은 생성 단계에서 필요한 데이터를 외부 데이터 소스에서 가져오는 작업을 담당함
- 에이전트
  - 언어 모델이 어떤 조치를 취할지 결정하고 해당 조치를 실행하며 관찰하고 필요한 경우 반복하는 과정을 포함함

- Langchain을 활용하면 언어 모델 기반 애플리케이션의 개발을 보다 쉽게 시작할 수 있으며 필요에 맞게 기능을 맞춤 설정하고 다양한 데이터 소스와 통합하여 복잡한 작업을 처리할 수 있게 됨


## 03. LangSmith 추적 설정
### LangSmith 추적 설정하기
- LLM 애플리케이션 개발, 모니터링 및 테스트를 위한 플랫폼

### LangSmith의 추적 기능
- LLM 애플리케이션의 동작을 이해하기 위한 강력한 도구
- LangChain 사용 여부와 관계없이 동급 최고의 추적 기능을 제공함
- 다음과 같은 문제를 추적하는 데 도움이 될 수 있음
  - 예상치 못한 최종 결과
  - 에이전트가 루핑되는 이유
  - 체인이 예상보다 느린 이유
  - 에이전트가 각 단계에서 사용한 토큰 수

### 프로젝트 단위 추적
- 프로젝트 단위로 실행 카운트, Error 발생률, 토큰 사용량, 과금 정보 등을 확인할 수 있음

#### 1개의 실행에 대한 세부 단계별 추적
- 1개의 실행을 한 뒤 retrieve된 문서의 검색 결과 뿐만 아니라 GPT의 입출력 내용에 대해서 자세하게 기록함
- 문서의 검색된 내용을 확인 후 검색 알고리즘을 변경해야할지 혹은 프롬프트를 변경해야할지 판단하는데 도움이 됨
- 상단에는 1개의 실행이 걸린 시간과 사용된 토큰 등이 표기가 됨
  - 청구 금액까지 표기해줌
 
## 05. LangChain Expression Language(LCEL)
### 프롬프트 템플릿의 활용
- Promptemplate
  - 사용자의 입력 변수를 사용하여 완전한 프롬프트 문자열을 만드는 데 사용되는 템플릿
  - 사용법
    - template : 템플릿 문자열
      - 이 문자열 내에서 중괄호 {}는 변수를 나타냄
    - input_variables : 중괄호 안에 들어갈 변수의 이름을 리스트로 정의함
- input_variables
  - promptTemplate에서 사용되는 변수의 이름을 정의함

### Chain 생성
#### LCEL(Langchain Expression Language)
- LCEL을 사용하여 다양한 구성 요소를 단일 체인으로 결합함
- | 기호는 unix 파이프 연산자와 유사하며 서로 다른 구성 요소를 연결하고 한 구성 요소의 출력을 다음 구성 요소의 입력으로 전달함
- 이 체인에서 사용자 입력은 프롬프트 템플릿으로 전달되고, 그런 다음 프롬프트 템플릿 출력은 모델로 전달됨
  - 각 구성 요소를 개별적으로 살펴보면 무슨 일이 일어나고 있는지 이해할 수 있음
  - 
  
